{"version":3,"sources":["../../../app-src/util/decorators/Controller.js"],"names":["Controller","seletores","elements","map","seletor","document","querySelector","constructor","constructorOriginal","constructorNovo","instance","Object","getOwnPropertyNames","prototype","forEach","property","Reflect","hasMetadata","associaEvento","getMetadata","metadado","selector","addEventListener","event","prevent","preventDefault","propertyKey"],"mappings":";;;AAAO,WAASA,UAAT,CAAoB,GAAGC,SAAvB,EAAkC;AACvC,UAAMC,WAAWD,UAAUE,GAAV,CAAcC,WAAWC,SAASC,aAAT,CAAuBF,OAAvB,CAAzB,CAAjB;;AAEA,WAAO,UAASG,WAAT,EAAsB;AAC3B,YAAMC,sBAAsBD,WAA5B;;AAEA,YAAME,kBAAkB,YAAW;AACjC,cAAMC,WAAW,IAAIF,mBAAJ,CAAwB,GAAGN,QAA3B,CAAjB;;AAEAS,eAAOC,mBAAP,CAA2BJ,oBAAoBK,SAA/C,EAA0DC,OAA1D,CACEC,YAAY;AACV,cAAIC,QAAQC,WAAR,CAAoB,WAApB,EAAiCP,QAAjC,EAA2CK,QAA3C,CAAJ,EAA0D;AACxDG,0BACER,QADF,EAEEM,QAAQG,WAAR,CAAoB,WAApB,EAAiCT,QAAjC,EAA2CK,QAA3C,CAFF;AAID;AACF,SARH;AAUD,OAbD;;AAeAN,sBAAgBI,SAAhB,GAA4BL,oBAAoBK,SAAhD;;AAEA,aAAOJ,eAAP;AACD,KArBD;;AAuBA,aAASS,aAAT,CAAuBR,QAAvB,EAAiCU,QAAjC,EAA2C;AACzCf,eACGC,aADH,CACiBc,SAASC,QAD1B,EAEGC,gBAFH,CAEoBF,SAASG,KAF7B,EAEoCA,SAAS;AACzC,YAAIH,SAASI,OAAb,EAAsB;AACpBD,gBAAME,cAAN;AACD;;AAEDf,iBAASU,SAASM,WAAlB,EAA+BH,KAA/B;AACD,OARH;AASD;AACF;;wBArCevB,U","file":"Controller.js","sourcesContent":["export function Controller(...seletores) {\n  const elements = seletores.map(seletor => document.querySelector(seletor));\n\n  return function(constructor) {\n    const constructorOriginal = constructor;\n\n    const constructorNovo = function() {\n      const instance = new constructorOriginal(...elements);\n\n      Object.getOwnPropertyNames(constructorOriginal.prototype).forEach(\n        property => {\n          if (Reflect.hasMetadata(\"bindEvent\", instance, property)) {\n            associaEvento(\n              instance,\n              Reflect.getMetadata(\"bindEvent\", instance, property)\n            );\n          }\n        }\n      );\n    };\n\n    constructorNovo.prototype = constructorOriginal.prototype;\n\n    return constructorNovo;\n  };\n\n  function associaEvento(instance, metadado) {\n    document\n      .querySelector(metadado.selector)\n      .addEventListener(metadado.event, event => {\n        if (metadado.prevent) {\n          event.preventDefault();\n        }\n\n        instance[metadado.propertyKey](event);\n      });\n  }\n}\n"]}