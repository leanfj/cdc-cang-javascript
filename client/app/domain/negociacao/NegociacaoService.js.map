{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegocicoesDaSemana","get","then","dados","negociacoes","map","objeto","Date","data","quantidade","valor","payLoad","mensagem","err","Error","obterNegociacoesDaSemanaAnterior","obterNegociacoesDaSemanaRetrasada","obtemNegociacoesDoPeriodo","error","console","log","periodo","Promise","all","reduce","novoArray","item","concat","sort","a","b","getTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,iB,sBAAAA,W;;AACAC,gB,iBAAAA,U;;;AAEF,YAAMC,iBAAN,CAAwB;AAC7BC,sBAAc;AACZ,eAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACD;AACDK,kCAA0B;AACxB,iBAAO,KAAKD,KAAL,CAAWE,GAAX,CAAe,oBAAf,EAAqCC,IAArC,CACLC,SAAS;AACP,kBAAMC,cAAcD,MAAME,GAAN,CAClBC,UACE,IAAIV,UAAJ,CACE,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CADF,EAEEF,OAAOG,UAFT,EAGEH,OAAOI,KAHT,CAFgB,CAApB;AAQA,kBAAMC,UAAU;AACdC,wBAAU,oCADI;AAEdR;AAFc,aAAhB;AAIA,mBAAOO,OAAP;AACD,WAfI,EAgBLE,OAAO;AACL,kBAAM,IAAIC,KAAJ,CAAU,oCAAV,CAAN;AACD,WAlBI,CAAP;AAoBD;;AAEDC,2CAAmC;AACjC,iBAAO,KAAKhB,KAAL,CAAWE,GAAX,CAAe,sBAAf,EAAuCC,IAAvC,CACLC,SAAS;AACP,kBAAMC,cAAcD,MAAME,GAAN,CAClBC,UACE,IAAIV,UAAJ,CACE,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CADF,EAEEF,OAAOG,UAFT,EAGEH,OAAOI,KAHT,CAFgB,CAApB;;AASA,kBAAMC,UAAU;AACdC,wBAAU,oCADI;AAEdR;AAFc,aAAhB;;AAKA,mBAAOO,OAAP;AACD,WAjBI,EAkBLE,OAAO;AACL,kBAAM,IAAIC,KAAJ,CACJ,0DADI,CAAN;AAGD,WAtBI,CAAP;AAwBD;;AAEDE,4CAAoC;AAClC,iBAAO,KAAKjB,KAAL,CAAWE,GAAX,CAAe,uBAAf,EAAwCC,IAAxC,CACLC,SAAS;AACP,kBAAMC,cAAcD,MAAME,GAAN,CAClBC,UACE,IAAIV,UAAJ,CACE,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CADF,EAEEF,OAAOG,UAFT,EAGEH,OAAOI,KAHT,CAFgB,CAApB;;AASA,kBAAMC,UAAU;AACdC,wBAAU,oCADI;AAEdR;AAFc,aAAhB;;AAKA,mBAAOO,OAAP;AACD,WAjBI,EAkBLE,OAAO;AACL,kBAAM,IAAIC,KAAJ,CACJ,2DADI,CAAN;AAGD,WAtBI,CAAP;AAwBD;;AAEKG,iCAAN,GAAkC;AAAA;;AAAA;AAChC,gBAAI,CACH,CADD,CACE,OAAOC,KAAP,EAAc;AACdC,sBAAQC,GAAR,CAAYF,KAAZ;AACA,oBAAM,IAAIJ,KAAJ,CAAU,+CAAV,CAAN;AACD;;AAED,gBAAIO,UAAU,MAAMC,QAAQC,GAAR,CAAY,CAC9B,MAAKvB,uBAAL,EAD8B,EAE9B,MAAKe,gCAAL,EAF8B,EAG9B,MAAKC,iCAAL,EAH8B,CAAZ,CAApB;AAKA,mBAAOK,QACJG,MADI,CACG,UAACC,SAAD,EAAYC,IAAZ;AAAA,qBAAqBD,UAAUE,MAAV,CAAiBD,KAAKtB,WAAtB,CAArB;AAAA,aADH,EAC4D,EAD5D,EAEJwB,IAFI,CAEC,UAACC,CAAD,EAAIC,CAAJ;AAAA,qBAAUA,EAAEtB,IAAF,CAAOuB,OAAP,KAAmBF,EAAErB,IAAF,CAAOuB,OAAP,EAA7B;AAAA,aAFD,CAAP;AAZgC;AAejC;AAhG4B","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from \"../../util/HttpService.js\";\nimport { Negociacao } from \"./Negociacao.js\";\n\nexport class NegociacaoService {\n  constructor() {\n    this._http = new HttpService();\n  }\n  obterNegocicoesDaSemana() {\n    return this._http.get(\"negociacoes/semana\").then(\n      dados => {\n        const negociacoes = dados.map(\n          objeto =>\n            new Negociacao(\n              new Date(objeto.data),\n              objeto.quantidade,\n              objeto.valor\n            )\n        );\n        const payLoad = {\n          mensagem: \"Negociações importadas com sucesso\",\n          negociacoes\n        };\n        return payLoad;\n      },\n      err => {\n        throw new Error(\"Não foi possível obter negociações\");\n      }\n    );\n  }\n\n  obterNegociacoesDaSemanaAnterior() {\n    return this._http.get(\"negociacoes/anterior\").then(\n      dados => {\n        const negociacoes = dados.map(\n          objeto =>\n            new Negociacao(\n              new Date(objeto.data),\n              objeto.quantidade,\n              objeto.valor\n            )\n        );\n\n        const payLoad = {\n          mensagem: \"Negociações importadas com sucesso\",\n          negociacoes\n        };\n\n        return payLoad;\n      },\n      err => {\n        throw new Error(\n          \"Não foi possível obter as negociações da semana anterior\"\n        );\n      }\n    );\n  }\n\n  obterNegociacoesDaSemanaRetrasada() {\n    return this._http.get(\"negociacoes/retrasada\").then(\n      dados => {\n        const negociacoes = dados.map(\n          objeto =>\n            new Negociacao(\n              new Date(objeto.data),\n              objeto.quantidade,\n              objeto.valor\n            )\n        );\n\n        const payLoad = {\n          mensagem: \"Negociações importadas com sucesso\",\n          negociacoes\n        };\n\n        return payLoad;\n      },\n      err => {\n        throw new Error(\n          \"Não foi possível obter as negociações da semana retrasada\"\n        );\n      }\n    );\n  }\n\n  async obtemNegociacoesDoPeriodo() {\n    try {\n    } catch (error) {\n      console.log(error);\n      throw new Error(\"Não foi possível obter negociações do período\");\n    }\n\n    let periodo = await Promise.all([\n      this.obterNegocicoesDaSemana(),\n      this.obterNegociacoesDaSemanaAnterior(),\n      this.obterNegociacoesDaSemanaRetrasada()\n    ]);\n    return periodo\n      .reduce((novoArray, item) => novoArray.concat(item.negociacoes), [])\n      .sort((a, b) => b.data.getTime() - a.data.getTime());\n  }\n}\n"]}